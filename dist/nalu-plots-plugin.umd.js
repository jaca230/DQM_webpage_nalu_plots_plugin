(function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.NaluPlotsPlugin=t())})(this,function(){"use strict";var N=Object.defineProperty;var C=(e,t,n)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>C(e,typeof t!="symbol"?t+"":t,n);function e({Plot:n,SettingTypes:l}){var i;return i=class extends n{static get settingSchema(){return{...super.settingSchema,selectedChannel:{type:l.INT,default:0,label:"Channel #",onChange:"onUpdateTick",advanced:!1},dataUrl:{type:l.STRING,default:"http://127.0.0.1:8000/api/json_path?last=1&json_path=/data_products/ChannelIntegralHistogramCollection",label:"Data URL",onChange:"onUpdateTick",advanced:!0}}}formatPlotly(a){var p;const u=(p=a==null?void 0:a.data)==null?void 0:p.arr;if(!Array.isArray(u)||u.length===0)return console.warn("No histograms found or empty array."),{data:[],layout:{}};const s=this.settings.selectedChannel;if(s<0||s>=u.length)return console.warn(`Selected channel ${s} is out of bounds.`),{data:[],layout:{}};const o=u[s];if(!o||!Array.isArray(o.fArray))return console.warn(`Histogram at selected index ${s} is invalid:`,o),{data:[],layout:{}};const h=o.fArray,c=o.fXaxis||{},d=c.fNbins||h.length-2,y=c.fXmin??0,m=((c.fXmax??1)-y)/d,r=[];for(let f=0;f<=d;f++)r.push(y+f*m);const b=[0,...h.slice(1,d+1)];return{data:[{type:"bar",x:r,y:b,name:o.fName||`hist_${s}`,marker:{color:"steelblue"},hoverinfo:"x+y+name",width:m}],layout:{autosize:!0,margin:{t:30,r:20,l:40,b:40},xaxis:{title:"Integral",range:[r[0],r[r.length-1]]},yaxis:{title:"Counts"},bargap:0,legend:{orientation:"h",y:-.2}}}}},x(i,"displayName","Nalu Integral Histogram"),i}function t({registry:n,baseClasses:l}){const{Plot:i,SettingTypes:g}=l,a=e({Plot:i,SettingTypes:g});n.register(a.name,a)}return t});
