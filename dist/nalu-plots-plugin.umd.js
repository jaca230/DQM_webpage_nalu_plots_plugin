(function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.NaluPlotsPlugin=t())})(this,function(){"use strict";var b=Object.defineProperty;var I=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>I(e,typeof t!="symbol"?t+"":t,n);function e({Plot:n,SettingTypes:l}){var a;return a=class extends n{static get settingSchema(){return{...super.settingSchema,selectedChannel:{type:l.INT,default:0,label:"Channel #",onChange:"onUpdateTick",advanced:!1},dataUrl:{type:l.STRING,default:"http://127.0.0.1:8000/api/json_path?last=1&json_path=/data_products/ChannelIntegralHistogramCollection",label:"Data URL",onChange:"onUpdateTick",advanced:!0}}}formatPlotly(s){var x;const u=(x=s==null?void 0:s.data)==null?void 0:x.arr;if(!Array.isArray(u)||u.length===0)return console.warn("No histograms found or empty array."),{data:[],layout:{}};const i=this.settings.selectedChannel;if(i<0||i>=u.length)return console.warn(`Selected channel ${i} is out of bounds.`),{data:[],layout:{}};const o=u[i];if(!o||!Array.isArray(o.fArray))return console.warn(`Histogram at selected index ${i} is invalid:`,o),{data:[],layout:{}};const m=o.fArray,c=o.fXaxis||{},d=c.fNbins||m.length-2,y=c.fXmin??0,p=((c.fXmax??1)-y)/d,r=[];for(let g=0;g<=d;g++)r.push(y+g*p);const N=[0,...m.slice(1,d+1)];return{data:[{type:"bar",x:r,y:N,name:o.fName||`hist_${i}`,marker:{color:"steelblue"},hoverinfo:"x+y+name",width:p}],layout:{autosize:!0,margin:{t:30,r:20,l:40,b:40},xaxis:{title:"Integral",range:[r[0],r[r.length-1]]},yaxis:{title:"Counts"},bargap:0,legend:{orientation:"h",y:-.2}}}}},f(a,"displayName","Nalu Integral Histogram"),f(a,"name","NaluIntegralHistogram"),a}function t({registry:n,baseClasses:l}){const{Plot:a,SettingTypes:h}=l,s=e({Plot:a,SettingTypes:h});n.register(s.name,s)}return t});
